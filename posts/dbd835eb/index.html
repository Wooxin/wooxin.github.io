<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><title>Linux网络管理 - tcpip [ &lt;&lt; 书集 &gt;&gt; ]</title><link rel="icon" type="image/x-icon" href="/img/favicon.png"><link rel="stylesheet" href="/css/woxhome.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/rss.xml" title="<< 书集 >>" type="application/atom+xml">
</head><body class="container-fluid font-monospace"><div class="w-100 sticky-top fixed-top" id="layout-top"><div class="row border rounded-2" id="top-main"><div class="col"><div id="top-left"><nav id="top-left-option"><div class="d-flex flex-row"><div class="col center-block" id="logo"><a href="/"><img class="img-fluid w-75" src="/img/logo.png" alt="Logo"></a></div><div class="col text-decoration-none user-select-none text-primary p-2 text-nowrap"><div id="fps">FPS: 0</div></div><div class="col"></div></div></nav></div></div><div class="col"><div id="top-mid"><nav class="d-flex flex-row" id="top-mid-option"><a class="col text-decoration-none user-select-none text-primary p-2 text-nowrap" href="/"><span class="label home">首页</span><i class="bi bi-house-fill"></i></a><a class="col text-decoration-none user-select-none text-primary p-2 text-nowrap" href="/archives"><span class="label archives">归档</span><i class="bi bi-archive-fill"></i></a><a class="col text-decoration-none user-select-none text-primary p-2 text-nowrap" href="/categories"><span class="label categories">分类</span><i class="bi bi-list"></i></a><a class="col text-decoration-none user-select-none text-primary p-2 text-nowrap" href="/tags"><span class="label tags">标签</span><i class="bi bi-tags"></i></a><a class="col text-decoration-none user-select-none text-primary p-2 text-nowrap" href="/logs"><span class="label">日志</span><i class="bi bi-list-nested"></i></a></nav></div></div><div class="col"><div id="top-right"><nav id="top-right-option"><div class="d-flex flex-row text-decoration-none user-select-none text-nowrap"><div class="col-3"></div><div class="col" id="top-search"><div class="search-div text-decoration-none user-select-none text-primary p-2 text-nowrap" id="search-icon"><i class="search-main bi bi-search"></i><i class="search-up bi bi-search-heart-fill"></i><div class="hidden" id="search-popup"><div id="search-panel"><input type="text" id="local-search-input" name="q" results="0" placeholder="搜索..."><div id="local-search-results"></div></div></div></div></div><div class="col" id="language-i18n"><div class="language-div text-decoration-none user-select-none text-primary p-2 text-nowrap"><i class="i18n-main bi bi-chat-left-text"></i><i class="i18n-up bi bi-chat-left-text-fill"></i></div></div><div class="col" id="Browsing-Progress"><div class="browsing-div text-decoration-none user-select-none text-primary p-2 text-nowrap"><i class="Browsing-main bi bi-0-circle"></i><i class="Browsing-up bi bi-arrow-up-circle-fill"></i></div></div><div class="col" id="ColorMode"><div class="colormode-div text-decoration-none user-select-none text-primary p-2 text-nowrap"><i class="ColorMode-main bi bi-diamond-half"></i><i class="ColorMode-up bi bi-diamond-fill"></i></div></div></div></nav></div><script>function initSearchWithRetry(){if("function"==typeof searchFunc&&"undefined"!=typeof jQuery){let t="search.xml";0===t.length&&(t="search.xml");const e="/"+t;try{searchFunc(e,"local-search-input","local-search-results")}catch(t){}}else void 0===initSearchWithRetry.retryCount&&(initSearchWithRetry.retryCount=0),initSearchWithRetry.retryCount<10&&(initSearchWithRetry.retryCount++,setTimeout(initSearchWithRetry,300))}document.addEventListener("DOMContentLoaded",(function(){setTimeout(initSearchWithRetry,500)}))</script></div></div></div><div class="h-100 w-100 mb-2" id="layout-mid"><div class="row h-100 w-100 mt-1 g-1" id="mid-main"><div class="col-1"><div class="border rounded-2 h-100 w-100" id="mid-left"><div class="text-center img-thumbnail rounded-circle img-thumbnail img-fluid user-select-none mt-3" id="menu-avatar"><img class="img-fluid rounded-circle" src="/img/avatar.jpg" alt="User Avatar"></div><div class="text-center user-select-none mt-3" id="menu-name"><span name>W</span><span name> o</span><span name> o</span><span name> x</span><span name> i</span><span name> n</span></div><hr><div class="user-select-none row m-0" id="layout-mid-left-card"><div class="w-100 m-0" id="layout-mid-left-card-main"><a class="mid-left-carf-main text-decoration-none" href="https://wooxin.github.io/rss.xml">RSS</a></div><div class="w-100 m-0" id="layout-mid-left-card-main"><a class="mid-left-carf-main text-decoration-none" target="_blank" rel="noopener" href="https://github.com/Wooxin">GitHub</a></div><div class="w-100 m-0" id="layout-mid-left-card-main"><a class="mid-left-carf-main text-decoration-none" target="_blank" rel="noopener" href="https://space.bilibili.com/25397506?spm_id_from=333.1007.0.0">BiliBili</a></div><div class="w-100 m-0" id="layout-mid-left-card-main"><a class="mid-left-carf-main text-decoration-none" target="_blank" rel="noopener" href="https://example.com/3">Youtube</a></div><div class="w-100 m-0" id="layout-mid-left-card-main"><a class="mid-left-carf-main text-decoration-none" target="_blank" rel="noopener" href="https://example.com/4">Weibo</a></div><div class="w-100 m-0" id="layout-mid-left-card-main"><a class="mid-left-carf-main text-decoration-none" target="_blank" rel="noopener" href="https://example.com/5">Twitter</a></div></div><hr><div class="text-center user-select-none overflow-hidden" id="layout-mid-left"><a class="text-decoration-none text-nowrap" href="/">友情链接</a></div></div></div><div class="col-3"><div class="border rounded-2 h-100 w-100" id="mid-mid"><div id="content-main"><div id="content-option"><nav class="m-1 mt-2 border rounded-2 breadcrumb" id="textTags"><div class="breadcrumb-item active text-nowrap breadcrumb-item active text-nowrap text-truncate p-0" id="textTags-nav"><div class="row"><div class="col me-auto"><div class="reading-title"><div class="reading-title-text">0%</div></div></div><div class="col"><span>文章列表</span></div><div class="col"></div></div></div></nav><div class="mt-3" id="recent-posts"><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/b2e15cb6/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql MyCat</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:19:56.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/3cc0e989/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql MHA</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:18:46.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/b85bd126/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql同步</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:17:57.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/9b20b04c/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql日志管理</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:16:56.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/19e3f215/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql用户与权限</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:16:16.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/f9bee56b/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql备份与恢复</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:14:12.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/4f318dc3/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql事务,索引</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:12:46.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/e115e1b7/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql语句</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:10:55.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/eb81faa3/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql安装</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:09:29.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/6d4e3357/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux数据库 - mysql</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T14:07:58.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/79bde3d2/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux网络管理 - ip</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T09:16:44.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/dbd835eb/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux网络管理 - tcpip</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T09:14:48.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/fdc792/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux网络管理 - iptables</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T09:13:07.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/5ea60cee/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux软件包管理 - yum-config-manager</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T09:08:20.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/423eb939/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux软件包管理 - yum</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T09:07:33.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/331ca29d/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux软件包管理 - rpm</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T09:07:04.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/2293a009/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">Linux软件包管理 - 源码包</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-20T09:06:24.000Z">25/09/20</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/d5d18b1/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">右键菜单的简单实现方式</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-19T08:02:01.000Z">25/09/19</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/dc41cc6a/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">如何统计字数与计算阅读时间</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-19T07:13:43.000Z">25/09/19</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/28109/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">文章阅读进度百分比的实现</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-17T11:11:56.000Z">25/09/17</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/22939/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">文章阅读进度条的实现</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-17T11:05:44.000Z">25/09/17</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/54125/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">在electron中使用pug和stylus</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-17T10:41:43.000Z">25/09/17</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/42785/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">telegram出现SMS Fee解决方法</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-17T06:53:09.000Z">25/09/17</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/51207/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">zabbix教程5 - zabbix自定义</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-15T12:13:25.000Z">25/09/15</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/3206/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">zabbix教程4 - zabbix agent</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-15T12:10:53.000Z">25/09/15</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/52295/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">zabbix教程3 - zabbix proxy</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-15T12:09:47.000Z">25/09/15</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/3526/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">zabbix教程2 - zabbix安装</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-15T12:06:51.000Z">25/09/15</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/26629/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">zabbix教程1 - zabbix简介</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-15T12:02:50.000Z">25/09/15</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/4214/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">ArchLinux速通Wayland - 第一章</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-14T08:00:54.000Z">25/09/14</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/842d6e9/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">杂谈 - 鸿蒙没有电脑分区</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-12T10:36:12.000Z">25/09/12</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/51444/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">杂谈 - 聊聊最近的糟心事</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2025-09-12T10:36:11.000Z">25/09/12</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/24757/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">SXPSL: 在Centos7上部署秘密实验室教程</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2024-11-04T07:11:55.000Z">24/11/04</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/60432/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">NVM完美配置教程</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2024-11-04T07:09:50.000Z">24/11/04</time></a><a class="recent-post-item d-flex flex-row border rounded-2 mt-2 mb-2 m-1 overflow-hidden" href="/posts/53385/"><div id="icon"><i class="bi bi-caret-right fs-3 m-0 p-0 text-left" id="icon-main"></i><i class="bi bi-caret-right-fill fs-3 m-0 p-0 text-left" id="icon-hover"></i></div><span class="post-title text-decoration-none p-2 text-nowrap text-truncate">将Centos的GLIB2升级到GLIB3</span><time class="post-date text-decoration-none p-2 text-nowrap ms-auto" datetime="2023-11-05T01:35:06.000Z">23/11/05</time></a></div></div></div></div></div><div class="col-8"><div class="border rounded-2 h-100 w-100" id="mid-right"><article id="post"><div class="container-fluid" id="post-main"><div id="post-toc"><div class="breadcrumb-item active text-nowrap breadcrumb-item active w-100" id="textTags-toc"><div><div class="toc-article" id="toc"><div class="toc-title"><div class="row d-flex flex-nowrap"><div class="col m-0"><span>目录</span><a href="#" onclick="return openct(this)" title="展开">[-]</a></div><div class="col m-0 p-0"><div class="reading-progress"><div class="reading-progress-text text-end">0%</div></div></div><div class="col-1 m-0 p-0"></div></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#tcpip%E5%8C%85"><span class="toc-text">TCP&#x2F;IP包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFosi%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B"><span class="toc-text">什么是OSI参考模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E5%B1%82osi%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-text">七层OSI参考模型的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E5%B1%82osi%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%80%BB%E7%BB%93-tcp-ip"><span class="toc-text">七层OSI参考模型的总结 (TCP &#x2F; IP)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcpdump"><span class="toc-text">tcpdump</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-text">数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#arp%E5%8D%8F%E8%AE%AE"><span class="toc-text">ARP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E6%8A%A5%E5%A4%B4"><span class="toc-text">以太网报头</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#rarp"><span class="toc-text">RARP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-text">常见问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-text">网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%8D%8F%E8%AE%AE"><span class="toc-text">ip协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ip%E5%8D%8F%E8%AE%AE%E7%AE%80%E4%BB%8B"><span class="toc-text">IP协议简介:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ip%E5%8D%8F%E8%AE%AE%E7%89%B9%E7%82%B9"><span class="toc-text">IP协议特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ip%E5%8D%8F%E8%AE%AE%E9%A6%96%E9%83%A8-20%E5%AD%97%E8%8A%82"><span class="toc-text">IP协议首部 20字节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ip%E5%88%86%E7%89%87"><span class="toc-text">IP分片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8ip%E7%A2%8E%E7%89%87%E6%94%BB%E5%87%BB"><span class="toc-text">利用ip碎片攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%98%BB%E6%AD%A2ip%E7%A2%8E%E7%89%87%E6%94%BB%E5%87%BB"><span class="toc-text">如何阻止IP碎片攻击</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icmp%E5%8D%8F%E8%AE%AE"><span class="toc-text">icmp协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp%E5%8D%8F%E8%AE%AE%E7%AE%80%E4%BB%8B"><span class="toc-text">ICMP协议简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp%E9%A6%96%E9%83%A8-8%E5%AD%97%E8%8A%82"><span class="toc-text">ICMP首部 8字节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp%E5%93%8D%E5%BA%94%E7%B1%BB%E5%9E%8B"><span class="toc-text">ICMP响应类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#type3-code8"><span class="toc-text">type&#x3D;3 code&#x3D;8</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#type3-code1"><span class="toc-text">type&#x3D;3 code&#x3D;1</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#type3-code2"><span class="toc-text">type&#x3D;3 code&#x3D;2</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#type3-code3"><span class="toc-text">type&#x3D;3 code&#x3D;3</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#checksum%E6%A0%A1%E9%AA%8C%E5%92%8C%E5%AD%97%E6%AE%B5-16%E4%BD%8D"><span class="toc-text">checksum校验和字段 16位</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-text">传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#udp%E5%8D%8F%E8%AE%AE"><span class="toc-text">udp协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%AE%80%E4%BB%8B"><span class="toc-text">UDP协议的简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">UDP协议的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E5%8D%8F%E8%AE%AE%E9%A6%96%E9%83%A8-8%E5%AD%97%E8%8A%82"><span class="toc-text">UDP协议首部 8字节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp%E6%8A%93%E5%8C%85%E5%AE%9E%E9%AA%8C"><span class="toc-text">UDP抓包实验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udp-flood%E6%94%BB%E5%87%BB"><span class="toc-text">UDP Flood攻击</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E5%8D%8F%E8%AE%AE"><span class="toc-text">tcp协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%AE%80%E4%BB%8B"><span class="toc-text">TCP协议的简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">TCP协议的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E5%8D%8F%E8%AE%AE%E9%A6%96%E9%83%A8-4%E5%AD%97%E8%8A%82"><span class="toc-text">TCP协议首部 4字节</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#contral-flag"><span class="toc-text">Contral Flag</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#urgent-data"><span class="toc-text">Urgent data</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#acknowledgment-field-significant"><span class="toc-text">Acknowledgment field significant</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#push-function"><span class="toc-text">Push function</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#reset"><span class="toc-text">Reset</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#synchronize-sequence-number"><span class="toc-text">Synchronize sequence number</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#no-more-data-for-sender-finish"><span class="toc-text">No more data for sender (Finish)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#window%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3"><span class="toc-text">window滑动窗口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#chechsum"><span class="toc-text">Chechsum</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#16%E4%BD%8D%E7%B4%A7%E6%80%A5%E6%8C%87%E9%92%88"><span class="toc-text">16位紧急指针</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E5%8D%8F%E8%AE%AE%E7%9A%843%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-text">tcp协议的3次握手</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E5%8D%8F%E8%AE%AE%E7%9A%844%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="toc-text">tcp协议的4次挥手</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8F%B7-%E7%A1%AE%E8%AE%A4%E5%8F%B7"><span class="toc-text">序列号、确认号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E4%BC%A0%E6%9C%BA%E5%88%B6rtt"><span class="toc-text">重传机制(RTT)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mss%E6%9C%80%E5%A4%A7%E6%8A%A5%E6%96%87%E6%AE%B5%E9%95%BF%E5%BA%A6"><span class="toc-text">MSS最大报文段长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#syn-flood"><span class="toc-text">syn flood</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-text">应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ftp%E5%8D%8F%E8%AE%AE"><span class="toc-text">ftp协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ftp%E5%8D%8F%E8%AE%AE%E7%AE%80%E4%BB%8B"><span class="toc-text">FTP协议简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ftp%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F"><span class="toc-text">FTP两种模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A2%AB%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%B5%8B%E8%AF%95"><span class="toc-text">被动模式测试</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E6%A8%A1%E5%BC%8F%E6%B5%8B%E8%AF%95"><span class="toc-text">主动模式测试</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ftp%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-text">FTP的命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE"><span class="toc-text">http协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#http%E5%8D%8F%E8%AE%AE%E7%AE%80%E4%BB%8B"><span class="toc-text">HTTP协议简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BF%E9%97%AEweb%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">使用浏览器访问web服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8D%8F%E8%AE%AE%E5%91%BD%E4%BB%A4%E8%AE%BF%E9%97%AEweb%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">使用协议命令访问web服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http%E7%9A%84%E6%8C%81%E4%B9%85%E6%80%A7%E8%BF%9E%E6%8E%A5"><span class="toc-text">HTTP的持久性连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#http%E5%A4%B4%E9%83%A8%E8%A7%A3%E9%87%8A%E6%89%A9%E5%B1%95"><span class="toc-text">HTTP头部解释（扩展）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nc%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85"><span class="toc-text">nc命令补充</span></a></li></ol></li></ol></div></div></div></div></div><h1>Linux网络管理 - tcpip</h1><div class="d-flex flex-row" id="post-date"><span class="p-2" id="post-date-head">创建:</span><div class="p-2" id="post-date-body">2025-09-20</div><span class="p-2" id="post-date-head">更新:</span><div class="p-2" id="post-date-body">2025-09-20</div><span class="p-2" id="post-count-head">字数:</span><div class="p-2" id="post-count-body"><a href="javascript:initWordCountOnly()">0 </a><span>字</span></div><span class="p-2" id="post-time-head">耗时:</span><div class="p-2" id="post-time-body"><a href="javascript:initReadingTimeOnly()">0 </a><span>分钟</span></div></div><div class="d-flex flex-row" id="post-cate-tag"><span class="p-2" id="post-cate-tag-head">分类:</span><p class="p-2" id="post-cate-tag-body">教程, Linux</p><span class="p-2" id="post-cate-tag-head">标签:</span><p class="p-2" id="post-cate-tag-body">Linux, 网络, tcpip</p></div><hr><div class="container scrollable-container" id="post-content"><h2 id="tcpip包"><a class="markdownIt-Anchor" href="#tcpip包"></a> TCP/IP包</h2><h3 id="什么是osi参考模型"><a class="markdownIt-Anchor" href="#什么是osi参考模型"></a> 什么是OSI参考模型</h3><ol><li>物理层（Physical Layer）：物理层定义了传输介质和设备之间的物理连接方式，包括电压、电缆规范、传输速率等。它处理比特流的传输。</li><li>数据链路层（Data Link Layer）：数据链路层负责在相邻节点之间可靠传输数据帧，通过物理地址（MAC地址）识别设备。它提供了一种错误检测和纠正的机制。</li><li>网络层（Network Layer）：网络层负责在网络中选择最佳路径并进行分组转发。它使用逻辑地址（IP地址）来标识设备和网络。</li><li>传输层（Transport Layer）：传输层提供端到端的可靠数据传输，确保数据的完整性、有序性和可靠性。它使用端口号来标识应用程序之间的通信。</li><li>会话层（Session Layer）：会话层建立、管理和终止应用程序之间的会话连接。它提供了数据交换的控制和同步机制。</li><li>表示层（Presentation Layer）：表示层负责数据的格式转换、加密和压缩，以确保不同系统之间的数据能够正确解释和显示。</li><li>应用层（Application Layer）：应用层是最高层，它提供了用户和应用程序之间的接口，包括文件传输、电子邮件、远程登录等。</li></ol><h3 id="七层osi参考模型的特性"><a class="markdownIt-Anchor" href="#七层osi参考模型的特性"></a> 七层OSI参考模型的特性</h3><p>每个层次都有特定的功能和协议，数据在从一个层次传递到另一个层次时会经过相应的封装和解封装过程。OSI参考模型的设计使得不同厂商的设备和软件能够互操作，从而实现跨平台和跨网络的通信。</p><h3 id="七层osi参考模型的总结-tcp-ip"><a class="markdownIt-Anchor" href="#七层osi参考模型的总结-tcp-ip"></a> 七层OSI参考模型的总结 (TCP / IP)</h3><p>－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br>TCP / IP<br>应用层： 它只负责产生相应格式的数据 ssh ftp nfs cifs dns http smtp pop3<br>－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br>传输层： 定义数据传输的两种模式：<br>TCP（传输控制协议：面向连接，可靠的，效率相对不高）<br>UDP（用户数据报协议：非面向连接，不可靠的，但效率高）<br>－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br>网络层： 连接不同的网络如以太网、令牌环网<br>IP （路由，分片） 、ICMP、 IGMP<br>－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br>数据链路层：以太网传输<br>ARP ( 地址解析协议，作用是将IP解析成MAC )<br>－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－<br>物理层： 主要任务是规定各种传输介质和接口与传输信号相关的一些特性<br>－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－</p><h2 id="tcpdump"><a class="markdownIt-Anchor" href="#tcpdump"></a> tcpdump</h2><p>tcpdump可以将网络中传送的数据包的“头”完全截获下来提供分析。它支持针对网络层、协议、主机、网络或端口的过滤，并提供and、or、not等逻辑语句来帮助你去掉无用的信息</p><table><thead><tr><th>命令</th><th>参数</th><th>作用</th><th>注释</th><th></th></tr></thead><tbody><tr><td>tcpdump</td><td>-i &lt;interface&gt;</td><td>指定网络接口</td><td>通过指定网络接口来捕获网络数据包</td><td></td></tr><tr><td>tcpdump</td><td>-n</td><td>禁用主机名解析</td><td>显示IP地址而不是主机名</td><td></td></tr><tr><td>tcpdump</td><td>-c &lt;count&gt;</td><td>捕获指定数量的数据包后停止</td><td>指定捕获的数据包数量</td><td></td></tr><tr><td>tcpdump</td><td>-s &lt;snaplen&gt;</td><td>指定数据包的最大捕获长度</td><td>设置数据包的最大捕获长度，以字节为单位</td><td></td></tr><tr><td>tcpdump</td><td>-w &lt;file&gt;</td><td>将捕获的数据包写入文件</td><td>将捕获的数据包保存到指定的文件中</td><td></td></tr><tr><td>tcpdump</td><td>-r &lt;file&gt;</td><td>从文件中读取数据包</td><td>从指定的文件中读取数据包进行分析</td><td></td></tr><tr><td>tcpdump</td><td>-A</td><td>以ASCII格式显示数据包内容</td><td>以ASCII格式显示数据包的内容</td><td></td></tr><tr><td>tcpdump</td><td>-X</td><td>以十六进制和ASCII格式显示数据包内容</td><td>以十六进制和ASCII格式显示数据包的内容</td><td></td></tr><tr><td>tcpdump</td><td>-vvv</td><td>显示详细的调试信息</td><td>显示更详细的调试信息，包括更多的协议细节</td><td></td></tr><tr><td>tcpdump</td><td>-e</td><td>显示以太网头部信息</td><td>显示以太网帧的头部信息</td><td></td></tr><tr><td>tcpdump</td><td>-q</td><td>简化输出</td><td>以简化的格式输出结果</td><td></td></tr><tr><td>tcpdump</td><td>-S</td><td>以绝对序号显示数据包</td><td>以绝对序号显示数据包的序号</td><td></td></tr><tr><td>tcpdump</td><td>-t</td><td>不显示时间戳</td><td>不显示数据包的时间戳</td><td></td></tr><tr><td>tcpdump</td><td>-l</td><td>行缓冲输出</td><td>使用行缓冲输出模式</td><td></td></tr><tr><td>tcpdump</td><td>-B &lt;buffer_size&gt;</td><td>设置捕获缓冲区大小</td><td>设置捕获数据包的缓冲区大小，以字节为单位</td><td></td></tr><tr><td>tcpdump</td><td>-F &lt;file&gt;</td><td>从文件中读取过滤条件</td><td>从指定的文件中读取过滤条件</td><td></td></tr><tr><td>tcpdump</td><td>-G &lt;rotate_seconds&gt;</td><td>自动循环文件</td><td>捕获数据包到一个文件一段时间后，自动切换到新文件</td><td></td></tr><tr><td>tcpdump</td><td>-W &lt;file_count&gt;</td><td>设置循环文件的数量</td><td>设置循环文件的数量，循环文件的命名格式为&lt;file&gt;.&lt;number&gt;</td><td></td></tr><tr><td>tcpdump</td><td>-L</td><td>列出可用的网络接口</td><td>列出系统上可用的网络接口</td><td></td></tr><tr><td>tcpdump</td><td>-E &lt;file&gt;</td><td>从文件中读取扩展信息</td><td>从指定的文件中读取扩展信息</td><td></td></tr><tr><td>tcpdump</td><td>-v</td><td>显示详细信息</td><td>显示更详细的信息，包括更多的协议细节</td><td></td></tr><tr><td>tcpdump</td><td>-V</td><td>显示版本信息</td><td>显示tcpdump的版本信息</td><td></td></tr><tr><td>tcpdump</td><td>-h</td><td>显示帮助信息</td><td>显示tcpdump的帮助信息</td><td></td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><hr><h2 id="数据链路层"><a class="markdownIt-Anchor" href="#数据链路层"></a> 数据链路层</h2><h3 id="arp协议"><a class="markdownIt-Anchor" href="#arp协议"></a> ARP协议</h3><p>ARP协议是“Address Resolution Protocol”（地址解析协议）的缩写。<br>ARP地址解析协议用于将计算机的网络地址（IP地址32位）转化为物理地址（MAC地址48位）[RFC826]。ARP协议是属于数据链路层的协议，在以太网中的数据帧从一个主机到达网内的另一台主机是根据48位的以太网地址（硬件地址）来确定接口的，而不是根据32位的IP地址。内核（如驱动）必须知道目的端的硬件地址才能发送数据</p><ol><li>应用程序构造数据包，该示例是产生ICMP包，被提交给内核（网络驱动程序）；</li><li>内核检查是否能够转化该IP地址为MAC地址，也就是在本地的ARP缓存中查看IP-MAC对应表[1]；</li><li>如果存在该IP-MAC对应关系，那么跳到步骤7；如果不存在该IP-MAC对应关系，那么接续下面的步骤；</li><li>内核进行ARP广播，目的地的MAC地址是FF-FF-FF-FF-FF-FF，ARP命令类型为REQUEST（1），其中包含有自己的MAC地址；</li><li>当192.168.1.2主机接收到该ARP请求后，将源主机的IP地址及MAC更新至自己的arp缓冲中，然后发送一个ARP的REPLY（2）命令，其中包含自己的MAC地址；</li><li>本地获得192.168.1.2主机的IP-MAC地址对应关系，并保存到ARP缓存中；</li><li>内核将把IP转化为MAC地址，然后封装在以太网头结构中，再把数据发送出去；</li></ol><p>使用arp-a命令就可以查看本地的ARP缓存内容，所以，执行一个本地的PING命令后，ARP缓存就会存在一个目的IP的记录了。当然，如果你的数据包是发送到不同网段的目的地，那么就一定存在一条网关的IP-MAC地址对应的记录</p><h3 id="以太网报头"><a class="markdownIt-Anchor" href="#以太网报头"></a> 以太网报头</h3><p>以太网报头中的前两个字段是以太网的源地址和目的地址。目的地址为全F的特殊地址是广播地址。电缆上的所有以太网接口都要接收广播的数据帧<br>两个字节长的以太网帧类型表示后面数据的类型。对于ARP请求或应答来说，该字段的值为0x0806<br>hardware (硬件)和protocol (协议)用来描述ARP分组中的各个字段。例如，一个ARP请求分组询问协议地址（这里是IP地址）对应的硬件地址（这里是以太网地址）</p><ul><li>硬件类型字段表示硬件地址的类型。它的值为1即表示以太网地址。</li><li>协议类型字段表示要映射的协议地址类型。它的值为0x0800即表示IP地址</li><li>硬件地址长度和协议地址长度分别指出硬件地址和协议地址的长度，以字节为单位。对于以太网上IP地址的ARP请求或应答来说，它们的值分别为6和4。 各占用1字节</li><li>op操作字段指出四种操作类型，它们是ARP请求（值为1）、ARP应答（值为2）、RARP请求（值为3）和R ARP应答（值为4）。</li><li>接下来的四个字段是发送端的硬件地址（在本例中是以太网地址）、发送端的协议地址（IP地址）、</li><li>目的端的硬件地址和目的端的协议地址。注意，这里有一些重复信息：在以太网的数据帧报头中和ARP请求数据帧中都有发送端的硬件地址。<br>对于一个ARP请求来说，除目的端硬件地址外的所有其他的字段都有填充值。当系统收到一份目的端为本机的ARP请求报文后，它就把硬件地址填进去，然后用两个目的端地址分别替换两个发送端地址，并把操作字段置为2，最后把它发送回去。</li></ul><h4 id="rarp"><a class="markdownIt-Anchor" href="#rarp"></a> RARP</h4><p>RARP即反向地址转换协议。<br>反向地址转换协议（RARP：Reverse Address Resolution Protocol） 反向地址转换协议（RARP）允许局域网的物理机器从网关服务器的 ARP 表或者缓存上请求其 IP 地址。网络管理员在局域网网关路由器里创建一个表以映射物理地址（MAC）和与其对应的 IP 地址。当设置一台新的机器时，其 RARP 客户机程序需要向路由器上的 RARP 服务器请求相应的 IP 地址。假设在路由表中已经设置了一个记录，RARP 服务器将会返回 IP 地址给机器，此机器就会存储起来以便日后使用</p><h3 id="常见问题"><a class="markdownIt-Anchor" href="#常见问题"></a> 常见问题</h3><ol><li>IP冲突的本质是什么？<br>我们知道，如果网络中存在相同IP地址的主机的时候，就会报告出IP地址冲突的警告。这是怎么产生的呢？<br>比如某主机B规定IP地址为192.168.0.1，如果它处于开机状态，那么其他机器A更<br>改IP地址为192.168.0.1就会造成IP地址冲突。其原理就是：主机A在连接网络（或更改IP地址）的时候就会向网络发送ARP包广播自己的IP地址，也就是freearp。如果网络中存在相同IP地址的主机B，那么B就会通过ARP来reply该地址，当A接收到这个reply后，A就会跳出IP地址冲突的警告，当然B也会有警告</li><li>arp欺骗<br>ARP协议并不只在发送了ARP请求才接收ARP应答。当计算机接收到ARP应答数据包的时候，就会对本地的ARP缓存进行更新，将应答中的IP和MAC地址存储在ARP缓存中。因此，在上面的假设网络中，B向A发送一个自己伪造的ARP应答，而这个应答中的数据为发送方IP地址是192.168.10.3（C的IP地址），MAC地址是DD-DD-DD-DD-DD-DD（C的MAC地址本来应该是CC-CC-CC-CC-CC-CC，这里被伪造了）。当A接收到B伪造的ARP应答，就会更新本地的ARP缓存，将本地的IP-MAC对应表更换为接收到的数据格式，由于这一切都是A的系统内核自动完成的，A可不知道被伪造了。</li></ol><hr><h2 id="网络层"><a class="markdownIt-Anchor" href="#网络层"></a> 网络层</h2><h3 id="ip协议"><a class="markdownIt-Anchor" href="#ip协议"></a> ip协议</h3><p>IP是英文Internet Protocol（网络之间互连的协议）的缩写，中文简称为“网协”，也就是为计算机网络相互连接进行通信而设计的协议。</p><h4 id="ip协议简介"><a class="markdownIt-Anchor" href="#ip协议简介"></a> IP协议简介:</h4><p>IP协议是TCP/IP协议族中最为核心的协议。所有TCP、UDP、ICMP及IGMP数据都以IP数据报格式传输。</p><h4 id="ip协议特点"><a class="markdownIt-Anchor" href="#ip协议特点"></a> IP协议特点</h4><ul><li>不可靠（unreliable）: 它不能保证IP数据报能成功地到达目的地。IP仅提供尽力而为的传输服务。如果发生某种错误时，如某个路由器暂时用完了缓冲区， IP有一个简单的错误处理算法：丢弃该数据报，然后发送ICMP消息报给信源端。任何要求的可靠性必须由上层来提供（如TCP）。</li><li>无连接（connectionless）： 这个术语的意思是IP并不维护任何关于后续数据报的状态信息。每个数据报的处理是相互独立的。这也说明， IP数据报可以不按发送顺序接收。如果一信源向相同的信宿发送两个连续的数据报（先是A，然后是B），每个数据报都是独立地进行路由选择，可能选择不同的路线，因此B可能在A到达之前先到达。</li></ul><h4 id="ip协议首部-20字节"><a class="markdownIt-Anchor" href="#ip协议首部-20字节"></a> IP协议首部 20字节</h4><p>IP数据报首部的固定部分中的各字段:</p><ol><li>版本　占4位，指IP协议的版本。通信双方使用的IP协议版本必须一致。目前广泛使用的IP协议版本号为4（即IPv4）。关于IPv6</li><li>首部长度　占4位，可表示的最大十进制数值是15(1111)则表示60字节头长度.最常用的首部长度就是20字节（即首部长度为0101）</li><li>服务类型 占8位，区分服务 用来获得更好的服务. 高层协议通过服务类型字段告诉ip处理设备,应该如何处理这个数据包,该字段占一个字节长(包括3bit优先级[0~7最高] 第4bit延迟 吞吐量标志第5bit 可靠性标志第6个bit 第7bit最小开销标志)</li><li>总长度　总长度指首部和数据之和的长度，单位为字节。总长度字段为16位，因此数据报的最大长度为2^16-1=65535字节, 在IP层下面的每一种数据链路层都有自己的帧格式，其中包括帧格式中的数据字段的最大长度，这称为最大传送单元MTU(Maximum Transfer Unit)。当一个数据报封装成链路层的帧时，此数据报的总长度（即首部加上数据部分）一定不能超过下面的数据链路层的MTU值。</li><li>标识(identification)　占16位。IP软件在存储器中维持一个计数器，每产生一个数据报，计数器就加1，并将此值赋给标识字段。但这个“标识”并不是序号，因为IP是无连接服务，数据报不存在按序接收的问题。当数据报由于长度超过网络的MTU而必须分片时，这个标识字段的值就被复制到所有的数据报的标识字段中。相同的标识字段的值使分片后的各数据报片最后能正确地重装成为原来的数据报。</li><li>标志(flag)　包分片标识 占3位，但目前只有2位有意义。第一位保留<ul><li>标志字段中的最低位记为MF(More Fragment)。MF=1即表示后面“还有分片”的数据报。MF=0表示这已是若干数据报片中的最后一个。</li><li>标志字段中间的一位记为DF(Don’t Fragment)，意思是“不能分片”。只有当DF=0时才允许分片。</li></ul></li><li>片偏移　占13位 表示当前的这个数据分片在原有数据包中所处的位置,有了这个字段就便于目标主机一片一片的重组数据包</li><li>生存时间　占8位，生存时间字段常用的的英文缩写是TTL(Time To Live),每记过一个路由器 该值就减1,当TTL值为0时,路由器就会丢弃该数据,并且向发包主机返回一个报警信息.后来把TTL字段的功能改为“跳数限制&quot;.TTL的意义是指明数据报在网络中至多可经过多少个路由器。显然，数据报在网络上经过的路由器的最大数值是255.若把TTL的初始值设为1，就表示这个数据报只能在本局域网中传送.这种机制避免了数据包在网络中无线的循环</li><li>协议　占8位，协议字段指出此数据报携带上层的数据是使用何种协议.比如 tcp 该值为6 udp该值17 1表示为ICMP协议， 2表示为IGMP协议</li><li>首部检验和　占16位。这个字段只检验数据报的首部，但不包括数据部分。这是因为数据报每经过一个路由器，路由器都要重新计算一下首部检验和（一些字段，如生存时间、标志、片偏移等都可能发生变化）。</li><li>源地址　占32位。</li><li>目的地址　占32位</li></ol><h4 id="ip分片"><a class="markdownIt-Anchor" href="#ip分片"></a> IP分片</h4><p>超过1500 byte，发送端分片，接收端重组</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看eth0网卡</span><br>[root@server2 ~]<span class="hljs-comment"># ip link show eth0</span><br>2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast qlen 1000<br><span class="hljs-built_in">link</span>/ether 00:0c:29:21:4d:a6 brd ff:ff:ff:ff:ff:ff<br><br><span class="hljs-comment"># 使用tcpdump 对 eth0 网卡进行抓包 并写入 fragment.txt 文件</span><br>[root@server ~]<span class="hljs-comment"># tcpdump -i eth0 -nn -s 1500 icmp and host 192.168.116.100 -w fragment.txt</span><br><span class="hljs-comment"># 发送 一次 4000 大小的数据包到 192.168.0.100  </span><br>[root@server ~]<span class="hljs-comment"># ping -c 1 -s 4000 192.168.0.100</span><br>PING 192.168.0.100 (192.168.0.100) 4000(4028) bytes of data.<br>4008 bytes from 192.168.0.100: icmp_seq=1 ttl=128 time=0.463 ms<br></code></pre></td></tr></table></figure><p>因为 mtu 超过了1500 所以会进行分片</p><h4 id="利用ip碎片攻击"><a class="markdownIt-Anchor" href="#利用ip碎片攻击"></a> 利用ip碎片攻击</h4><p>IP首部有两个字节表示整个IP数据包的长度，所以IP数据包最长只能为0xFFFF，就是65535字节。如果有意发送总长度超过65535的IP碎片，一些老的系统内核在处理的时候就会出现问题，导致崩溃或者拒绝服务。另外，如果分片之间偏移量经过精心构造，一些系统就无法处理，导致死机。所以说，漏洞的起因是出在重组算法上。下面我们逐个分析一些著名的碎片攻击程序，来了解如何人为制造IP碎片来攻击系统</p><blockquote><p>ping of death是利用ICMP协议的一种碎片攻击。攻击者发送一个长度超过65535的Echo Request数据包，目标主机在重组分片的时候会造成事先分配的65535字节缓冲区溢出，系统通常会崩溃或挂起。ping不就是发送ICMP Echo Request数据包的吗？让我们尝试攻击一下吧！不管IP和ICMP首部长度了，数据长度反正是多多益善，就65535吧，发送一个包：<br>ping -c 1 -s 65535 192.168.0.1<br>Error: packet size 65535 is too large. Maximum is 65507<br>不走运，看来Linux自带的ping不允许我们做坏事。<br>65507是它计算好的：65535-20-8=65507。Win2K下的ping更抠门，数据只允许65500大小。所以你必须找另外的程序来发包，但是目前新版本的操作系统已经搞定这个缺陷了,还有jolt2 和 teardrop</p></blockquote><h4 id="如何阻止ip碎片攻击"><a class="markdownIt-Anchor" href="#如何阻止ip碎片攻击"></a> 如何阻止IP碎片攻击</h4><ul><li>Windows系统请打上最新的Service Pack，目前的Linux内核已经不受影响。</li><li>如果可能，在网络边界上禁止碎片包通过，或者用iptables限制每秒通过碎片包的数目。</li><li>如果防火墙有重组碎片的功能，请确保自身的算法没有问题，否则被DoS就会影响整个网络。</li><li>Win2K系统中，自定义IP安全策略，设置 “碎片检查”</li></ul><h3 id="icmp协议"><a class="markdownIt-Anchor" href="#icmp协议"></a> icmp协议</h3><h4 id="icmp协议简介"><a class="markdownIt-Anchor" href="#icmp协议简介"></a> ICMP协议简介</h4><p>ICMP是（Internet Control Message Protocol）Internet控制报文协议。它是TCP/IP协议族的一个子协议，用于在IP主机、路由器之间传递控制消息。控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。这些控制消息虽然并不传输用户数据，但是对于用户数据的传递起着重要的作用。<br>ICMP经常被认为是IP层的一个组成部分。它传递差错报文以及其他需要注意的信息。ICMP报文通常被IP层或更高层协议（TCP或UDP）使用。一些ICMP报文把差错报文返回给用户进程<br>其功能主要有：</p><ul><li>侦测远端主机是否存在。</li><li>建立及维护路由资料。</li><li>重导资料传送路径。</li></ul><h4 id="icmp首部-8字节"><a class="markdownIt-Anchor" href="#icmp首部-8字节"></a> ICMP首部 8字节</h4><h4 id="icmp响应类型"><a class="markdownIt-Anchor" href="#icmp响应类型"></a> ICMP响应类型</h4><ol><li>Echo Reply（回显应答）：用于响应Echo Request消息，通常用于网络连通性测试（例如ping命令）。</li><li>Destination Unreachable（目标不可达）：用于指示数据包无法到达目标地址。常见的原因包括目标主机不可达、网络不可达、端口不可达等。</li><li>Source Quench（源点压制）：用于指示源主机发送速度过快，要求其减缓发送速度以避免网络拥塞。</li><li>Redirect（重定向）：用于指示路由器告知主机发送数据包的最佳路径，并提供一个更佳的下一跳路由器地址。</li><li>Time Exceeded（超时）：用于指示某个数据包在传输过程中发生了超时。常见的原因包括数据包在路由器上被丢弃或者数据包在网络中循环转发。</li><li>Parameter Problem（参数问题）：用于指示某个数据包的头部包含错误或者不完整的参数。</li><li>Timestamp Reply（时间戳应答）：用于响应Timestamp Request消息，提供时间信息。</li></ol><p>8 响应请求（ECHO-REQUEST）<br>0 响应应答（ECHO-REPLY）<br>3 不可到达</p><h5 id="type3-code8"><a class="markdownIt-Anchor" href="#type3-code8"></a> type=3 code=8</h5><p>网络不可到达</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 模拟 type=3 code=8 问题</span><br><span class="hljs-comment"># 有网关 ping不存在的网段主机 网关开转发并且没有该网段路由(网关没有设置自己网关)</span><br>tcpdump -nn -i ens33 icmp -w /tmp/icmp-3.txt<br></code></pre></td></tr></table></figure><blockquote><p>意思是在一个网关主机上ping另一个网关的主机, 并且网关服务器必须开启转发但不能有被ping主机的网段<br>如:<br>服务器A: 网络(192.168.10.100) 网关(192.168.10.0)<br>网关服务器: 开启转发 网络1(192.168.10.1) 网络2(100.100.100.0)<br>服务器B: 网络(99.99.99.99)</p></blockquote><h5 id="type3-code1"><a class="markdownIt-Anchor" href="#type3-code1"></a> type=3 code=1</h5><p>主机不可到达</p><ol><li>ping本网段的一台主机,主机不存在(lo响应自己)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tcpdump -nn -i lo icmp -w /tmp/icmp-1.txt<br></code></pre></td></tr></table></figure><blockquote><p>意思是ping一个本网段并不存在的主机, 需要与本机同一网段, 但不能是真是存在的</p></blockquote><ol start="2"><li>ping不在本网段的主机 有网关 网关开转发并且有该网段路由 对应主机不存在</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tcpdump -nn -i ens33 icmp -w /tmp/icmp-2.txt<br></code></pre></td></tr></table></figure><blockquote><p>意思是在一个网关主机上ping另一个网关的主机, 并且网关服务器必须开启转发并填入双方主机网关, 但不能有被ping主机的IP<br>如:<br>服务器A: 网络(192.168.10.100) 网关(192.168.10.0)<br>网关服务器: 开启转发 网络1(192.168.10.1) 网络2(100.100.100.0)<br>服务器B: 网络(100.100.100.100) <strong>注意:</strong> 不能真的有100.100这个IP的存在</p></blockquote><h5 id="type3-code2"><a class="markdownIt-Anchor" href="#type3-code2"></a> type=3 code=2</h5><p>协议不可到达</p><h5 id="type3-code3"><a class="markdownIt-Anchor" href="#type3-code3"></a> type=3 code=3</h5><ol><li>ping存在主机 对应主机有防火墙 REJECT</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">iptables -t filter -A INPUT -p icmp -j REJECT <span class="hljs-comment"># 创建规则</span><br>iptables -t filter -D INPUT -p icmp -j REJECT <span class="hljs-comment"># 删除规则</span><br><br><span class="hljs-comment"># ping已经管控了icmp的主机</span><br>tcpdump -nn -i ens33 icmp -w /tmp/icmp-2.txt<br></code></pre></td></tr></table></figure><ol start="2"><li>指定一个主机 不打开的dns服务, 解析域名</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tcpdump -nn -i ens33 icmp -w /tmp/icmp-4.txt<br></code></pre></td></tr></table></figure><h3 id="checksum校验和字段-16位"><a class="markdownIt-Anchor" href="#checksum校验和字段-16位"></a> checksum校验和字段 16位</h3><p>wireshark考虑到window系统与Linux系统发出的ping报文（主要指ping应用字段而非包含IP头的ping包）的字节顺序不一样（windows为LE：little-endian byte order，Linux为BE：big-endian），为了体现wireshark的易用性，开发者将其分别显示出来。</p><hr><h2 id="传输层"><a class="markdownIt-Anchor" href="#传输层"></a> 传输层</h2><h3 id="udp协议"><a class="markdownIt-Anchor" href="#udp协议"></a> udp协议</h3><p>不用先与对方建立连接（非面向连接）</p><h4 id="udp协议的简介"><a class="markdownIt-Anchor" href="#udp协议的简介"></a> UDP协议的简介</h4><p>UDP 是User Datagram Protocol的简称， 中文名是用户数据包协议.是OSI参考模型中一种无连接的传输层协议，提供面向事务的简单不可靠信息传送服务。在网络中它与TCP协议一样用于处理 UDP数据包。在OSI模型中，在第四层传输层，处于IP协议的上一层。UDP有不提供数据包分组、组装和不能对数据包进行排序的缺点，也就是说当报文发送之后，是无法得知其是否安全完整到达的。</p><h4 id="udp协议的特点"><a class="markdownIt-Anchor" href="#udp协议的特点"></a> UDP协议的特点</h4><p>它不属于连接型协议，因而具有资源消耗小，处理速度快的优点，所以通常音频、视频和普通数据在传送时使用UDP较多，因为它们即使偶尔丢失一两个数据包，也不会对接收结果产生太大影响。比如我们聊天用的QQ 视频会议软件就是使用的UDP协议。<br>非面向连接：不用先与对方建立连接，不握手<br>不可靠的：没有确认机制</p><ol><li>无连接性：UDP是一种无连接的协议，发送方在发送数据之前不需要与接收方建立连接。每个UDP数据包都是独立的，不依赖于之前或之后的数据包。</li><li>非可靠性：相对于TCP的可靠性，UDP不提供数据包的可靠性保证。它没有确认机制，也不会进行重传操作。一旦数据包被发送出去，UDP就不再关心其是否到达目标主机。</li><li>高效性：由于UDP不需要维护连接状态和执行复杂的传输控制机制，它的开销相对较小，传输效率较高。这使得UDP在实时应用程序中非常有用，如音频和视频流媒体。</li><li>面向数据报：UDP将数据划分为数据报（Datagram），每个数据报都有自己的完整标识。这意味着应用程序可以控制数据的边界，确保接收方按照正确的顺序接收和处理数据。</li><li>支持多播和广播：UDP可以轻松地支持多播和广播传输。多播传输允许将数据发送到一个组中的多个接收方，而广播传输则将数据发送到网络中的所有设备。</li><li>低延迟：由于UDP的简单性和无连接性，它对延迟非常敏感。这使得UDP适用于需要快速传输的应用程序，如实时游戏和视频会议。</li></ol><h4 id="udp协议首部-8字节"><a class="markdownIt-Anchor" href="#udp协议首部-8字节"></a> UDP协议首部 8字节</h4><p>数据报文的长度＝DATA长度 ＋ 8字节UDP首部的长度 ＋ 20字节IP首部的长度</p><p><strong>source port:</strong> 主动访问端的源端口总是大于1024的随机端口<br><strong>destination port:</strong> 目的端口<br><strong>length:</strong> 指的是当前UDP的数据段的长度（DATA长度＋UDP首部的长度）</p><h4 id="udp抓包实验"><a class="markdownIt-Anchor" href="#udp抓包实验"></a> UDP抓包实验</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 使用 tcpdump 对 192.168.0.101 进行udp协议抓包</span><br>[root@server2 ~]<span class="hljs-comment"># tcpdump -i eth0 -nn udp and host 192.168.0.101</span><br><br><span class="hljs-comment"># 打开本地udp端口5555</span><br>[root@server2 ~]<span class="hljs-comment"># nc -l 192.168.0.101 -u 5555</span><br><br><span class="hljs-comment"># 连接到192.168.0.101的udp 5555端口</span><br>[root@server2 ~]<span class="hljs-comment"># nc 192.168.0.101 -u 5555</span><br><br></code></pre></td></tr></table></figure><h4 id="udp-flood攻击"><a class="markdownIt-Anchor" href="#udp-flood攻击"></a> UDP Flood攻击</h4><p>UDP Flood是日渐猖厥的流量型DoS攻击，原理也很简单。常见的情况是利用大量UDP小包冲击DNS服务器或Radius认证服务器、流媒体视频服务器。 100k pps的UDP Flood经常将线路上的骨干设备例如防火墙打瘫，造成整个网段的瘫痪。由于UDP协议是一种无连接的服务，在UDP FLOOD攻击中，攻击者可发送大量伪造源IP地址的小UDP包。但是，由于UDP协议是无连接性的，所以只要开了一个UDP的端口提供相关服务的话，那么就可针对相关的服务进行攻击。</p><h3 id="tcp协议"><a class="markdownIt-Anchor" href="#tcp协议"></a> tcp协议</h3><h4 id="tcp协议的简介"><a class="markdownIt-Anchor" href="#tcp协议的简介"></a> TCP协议的简介</h4><p>Transmission Control Protocol 传输控制协议,TCP是一种面向连接（连接导向）的、可靠的、基于字节流的传输层（Transport layer）通信协议，由IETF的RFC 793说明（specified）。TCP在IP报文的协议号是6。在简化的计算机网络OSI模型中，它完成第四层传输层所指定的功能，UDP是同一层内另一个重要的传输协议。</p><h4 id="tcp协议的特点"><a class="markdownIt-Anchor" href="#tcp协议的特点"></a> TCP协议的特点</h4><ol><li><p>可靠性：TCP提供可靠的数据传输机制。它使用确认机制和超时重传来确保数据的完整性和准确性。当接收方收到数据时，它会发送确认消息给发送方，如果发送方在一定时间内没有收到确认消息，它会重新发送数据。</p></li><li><p>面向连接：在使用TCP之前，发送方和接收方需要建立一个连接。这个连接是双向的，可以在两个方向上进行数据传输。连接的建立过程包括三次握手，即发送方发送连接请求，接收方回复确认，最后发送方再次回复确认。</p></li><li><p>流量控制：TCP使用流量控制机制来确保发送方不会以超过接收方处理能力的速度发送数据。接收方可以通过窗口大小告知发送方可以接收的数据量。</p></li><li><p>拥塞控制：TCP使用拥塞控制机制来避免网络拥塞。当网络出现拥塞时，TCP会降低发送速率，并且定期增加发送速率，以便逐步恢复。</p></li><li><p>面向字节流：TCP将数据视为一串无结构的字节流，而不是独立的消息。它会将数据分割成适当的大小，并在接收端重新组装。</p></li><li><p>可扩展性：TCP是一种通用协议，可以在不同类型的网络中使用，例如局域网（LAN）和广域网（WAN）。它可以适应不同的网络环境和各种应用需求。</p></li><li><p>面向连接： 三次握手和四次挥手</p><ul><li>SYN 同步标记</li><li>FIN 结束标记</li></ul></li><li><p>可靠的： 确认和重传机制</p><ul><li>确认机制： ACK 确认标记</li><li>重传机制： 在RTT（数据段往返时间），没有收到ACK，则认为需要重传整个数据段</li></ul></li><li><p>TCP的状态</p></li><li><p>TCP的标记</p><ul><li>SYN： 同步标记位</li><li>ACK： 确认标记位（包括三次握手中的确认及之后数据传输时的确认）</li><li>RST： 重置标记位（访问一个未打开的TCP端口时，服务器返回一个带RST标记位的响应）</li><li>PSH： 推标记位 （延时性比较高的时候都会加上PSH,比较快的发送出去,不往缓存中放，ssh，telnet，ftp-command）</li><li>URG： 紧急标志位（通信的时候网络故障问题引起的数据没传完，会发送一个URG标记位）</li><li>FIN： 结束标记位 ( 发送端完成发送任务，双方都需要确认没有数据再发给对方 )</li></ul></li></ol><h4 id="tcp协议首部-4字节"><a class="markdownIt-Anchor" href="#tcp协议首部-4字节"></a> TCP协议首部 4字节</h4><p><strong>Source Port / Destination Port:</strong> 来源端口/目的端口。其中包含来源端口/目的端口的端口号。<br><strong>Sequence Number:</strong> 封包序号。当数据要从一台主机传送去另一台主机的时候，发送端会为封包建立起一个起始序号，然后按照所传送的数据长度(字节数值)，依次递增上去。使用递增之后的值来作为下一个封包的序号。这样接收端就可以根据序号来检测资料是否接收完整了。<br><strong>Acknowledge Number:</strong> 回应序号。当接收端接收到 TCP 封包并通过检验确认之后，会依照发送序号、再加上数据长度产生一个响应序号，附在下一个响应封包送回给对方(无需额外的送出专门的确认封包)，这样接收端就知道刚才的封包已经被成功接收到了。假如基于网络状况或其它原因，当封包的定时器达到期限时，接收端还没接收到回应序号，就会认为该封包丢失了并加以重送。如果刚好重发封包之后才接收到响应，接收端就会根据序号来判断该封包是否被重复发送，如果是的话，将之丢弃不做任何处理</p><h5 id="contral-flag"><a class="markdownIt-Anchor" href="#contral-flag"></a> Contral Flag</h5><p>控制标记。一共有六个它们分别是：</p><h5 id="urgent-data"><a class="markdownIt-Anchor" href="#urgent-data"></a> Urgent data</h5><p>如果URG为1，表示这是一个携有紧急资料的封包。 TCP的紧急方式是发送端向另一端发送紧急数据的一种方式。紧急指针指向包内数据段的某个字节不进入接收缓冲就直接交给上层进程,余下的数据要进入接收缓冲。通信的时候网络故障问题引起的数据没传完，会发送一个URG标记位</p><h5 id="acknowledgment-field-significant"><a class="markdownIt-Anchor" href="#acknowledgment-field-significant"></a> Acknowledgment field significant</h5><p>如果ACK为1，表示此封包属于一个要回应的封包。一般都会为1。</p><h5 id="push-function"><a class="markdownIt-Anchor" href="#push-function"></a> Push function</h5><p>如果PSH为1，此封包所携带的数据会直接上传给上层应用程序而无需经过TCP处理。</p><h5 id="reset"><a class="markdownIt-Anchor" href="#reset"></a> Reset</h5><p>如果RST为1，要求重传。表示要求重新设定封包再重新传递。</p><h5 id="synchronize-sequence-number"><a class="markdownIt-Anchor" href="#synchronize-sequence-number"></a> Synchronize sequence number</h5><p>如果SYN为1，表示要求双方进行同步沟通。</p><h5 id="no-more-data-for-sender-finish"><a class="markdownIt-Anchor" href="#no-more-data-for-sender-finish"></a> No more data for sender (Finish)</h5><p>如果FIN为1，表示传送结束，然後双方发出结束回应进而正式终止一个TCP传送过程</p><h5 id="window滑动窗口"><a class="markdownIt-Anchor" href="#window滑动窗口"></a> window滑动窗口</h5><p>TCP使用一种窗口（window）机制来控制数据流。当一个连接建立时，连接的每一端分配一个缓冲区来保存输入的数据，并将缓冲区的尺寸发送给另一端。当数据到达时，接收方发送确认，其中包含了自己剩余的缓冲区尺寸。剩余的缓冲区空间的大小被称为窗口（window） ，指出窗口大小的通知称为窗口通告（window advertisement） 。接收方在发送的每一确认中都含有一个窗口通告。<br>如果接收方应用程序读数据的速度能够与数据到达的速度一样快，接收方将在每一确认中发送一个正的窗口通告。然而，如果发送方操作的速度快于接收方（由于C P U更快） ，接收到的数据最终将充满接收方的缓冲区，导致接收方通告一个零窗口（ zero window） 。发送方收到一个零窗口通告时，必须停止发送，直到接收方重新通告一个正的窗口。</p><blockquote><p>比如两台主机A向B主机发包,如果B主机的缓冲区缓冲的数据大小,超出部分就会被B机丢弃,也叫缓冲区溢出,那么这种情况如何解决?这就用到了滑动窗口机制,如果A主机并不确定B主机缓冲区大小,那么先发3个数据包给B主机,B主机缓冲区只有2,那么B主机就会应答给A主机数据包 补发数据3并且告诉A主机win_size2.A主机接收到后可能还会发3,4,5这3个数据给主机B,主机B再次应答补发数据包5并且告诉A主机win_size2,这时候A主机知道了B主机只能接受2个数据包.</p></blockquote><h5 id="chechsum"><a class="markdownIt-Anchor" href="#chechsum"></a> Chechsum</h5><p>当资料要传送出去的时候发送端会计算好封包资料大小然後得出这个检验值封包一起发送当接收端收到封包之後会再对资料大小进行计算看看是否和检验值一致如果结果不相称则被视为残缺封包会要求对方重发该个封包。</p><h5 id="16位紧急指针"><a class="markdownIt-Anchor" href="#16位紧急指针"></a> 16位紧急指针</h5><p>只有当URG标志置1时紧急指针才有效。紧急指针是一个正的偏移量，和序号字段中的值相加表示紧急数据最后一个字节的序号。TCP的紧急方式是发送端向另一端发送紧急数据的一种方式。</p><h4 id="tcp协议的3次握手"><a class="markdownIt-Anchor" href="#tcp协议的3次握手"></a> tcp协议的3次握手</h4><ol><li>第一次握手：客户端发送一个特殊的消息（称为SYN）给服务器端。这个消息包含了一些连接建立的参数，比如初始序列号。客户端希望与服务器建立连接。</li><li>第二次握手：服务器接收到客户端的SYN消息后，会发送一个确认消息（称为ACK）给客户端。同时，服务器也会发送自己的SYN消息给客户端。这个SYN消息通常被称为SYN/ACK消息。服务器确认了客户端的请求，并告诉客户端它也希望建立连接。</li><li>第三次握手：客户端接收到服务器端的SYN/ACK消息后，会发送一个确认消息（ACK）给服务器端。客户端确认了服务器的请求，并告诉服务器连接已经建立。</li></ol><h4 id="tcp协议的4次挥手"><a class="markdownIt-Anchor" href="#tcp协议的4次挥手"></a> tcp协议的4次挥手</h4><ol><li>第一次挥手：客户端发送一个关闭连接的请求给服务器端。这个消息称为FIN（Finish）消息。客户端表示它不再发送数据给服务器端了，但仍然可以接收服务器端发送的数据。</li><li>第二次挥手：服务器接收到客户端的关闭请求后，会发送一个确认消息给客户端。这个消息称为ACK（Acknowledgement）消息。服务器告诉客户端它已经收到了关闭请求。</li><li>第三次挥手：服务器发送一个关闭连接的请求给客户端。这个消息也是一个FIN消息。服务器表示它不再发送数据给客户端，并且也不再接收客户端发送的数据。</li><li>第四次挥手：客户端接收到服务器端的关闭请求后，会发送一个确认消息给服务器端。这也是一个ACK消息。客户端确认了服务器的关闭请求，并告诉服务器它已经准备好关闭连接。</li></ol><h4 id="序列号-确认号"><a class="markdownIt-Anchor" href="#序列号-确认号"></a> 序列号、确认号</h4><p>通信的双方各自维护着一套 seq 序列号，并对对方发送的数据包进行 ACK 确认。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@server2 ~]<span class="hljs-comment"># tcpdump -i eth0 -nn -S -r tcp.tcpdump //-S详细的方式，适合看序列号</span><br>[root@server2 ~]<span class="hljs-comment"># tcpdump -i eth0 -nn -S -r tcp.tcpdump &gt; tcp.file</span><br></code></pre></td></tr></table></figure><h4 id="重传机制rtt"><a class="markdownIt-Anchor" href="#重传机制rtt"></a> 重传机制(RTT)</h4><p>每个数据段都有一个重传时间 这个时间是根据网络情况算出来.如果在该时间范围内没有ack 那就要重传数据段注意不是数据包.(数据段可能是N个数据包) 网络层不是管重传的只能在传输层完成</p><h4 id="mss最大报文段长度"><a class="markdownIt-Anchor" href="#mss最大报文段长度"></a> MSS最大报文段长度</h4><p>MSS表示TCP传往另一端最大块数据的长度。当一个连接建立时，连接的双方都要通知各自的MSS。一般来说，报文段越大，允许<br>每个报文段传输的数据就越多，相对于IP和TCP首部有更高的网络利用率。<br>以太网MSS： MTU（1500） - 40（TCP首部） - 20（IP首部） = 1440</p><h4 id="syn-flood"><a class="markdownIt-Anchor" href="#syn-flood"></a> syn flood</h4><p>攻击原理：SYN Flood是当前最流行的DoS（拒绝服务攻击）与DDoS（分布式拒绝服务攻击）的方式之一，这是一种利用TCP协议缺陷，发送大量伪造的TCP连接请求，常用假冒的IP或IP号段发来海量的请求连接的第一个握手包（SYN包），被攻击服务器回应第二个握手包（SYN+ACK包），因为对方是假冒IP，对方永远收不到包且不会回应第三个握手包。导致被攻击服务器保持大量SYN_RECV状态的半连接，并且会重试默认5次回应第二个握手包，塞满TCP等待连接队列，资源耗尽（CPU满负荷或内存不足），让正常的业务请求连接不进来</p><hr><h2 id="应用层"><a class="markdownIt-Anchor" href="#应用层"></a> 应用层</h2><h3 id="ftp协议"><a class="markdownIt-Anchor" href="#ftp协议"></a> ftp协议</h3><h4 id="ftp协议简介"><a class="markdownIt-Anchor" href="#ftp协议简介"></a> FTP协议简介</h4><p>FTP 是 TCP/IP 协议组中的协议之一，是英文File Transfer Protocol的缩写。该协议是Internet文件传送的基础，它由一系列规格说明文档组成，目标是提高文件的共享性，提供非直接使用远程计算机，使存储介质对用户透明和可靠高效地传送数据。简单的说，FTP就是完成两台计算机之间的拷贝，从远程计算机拷贝文件至自己的计算机上，称之为“下载（download）”文件。若将文件从自己计算机中拷贝至远程计算机上，则称之为“上载（upload）”文件。在TCP/IP协议中，FTP标准TCP端口号为21，Port方式数据端口为20。</p><h4 id="ftp两种模式"><a class="markdownIt-Anchor" href="#ftp两种模式"></a> FTP两种模式</h4><p>两种数据传输模式：主动模式，被动模式</p><p><strong>被动模式:</strong> 服务器端只开21和大于1024随机端口<br>服务器和客户端会协商好一个端口，然后客户端从这个端口读数据</p><p><strong>主动模式:</strong> 服务器端打开21和20端口<br>客户端和服务端通过20号端口传输数据</p><h5 id="被动模式测试"><a class="markdownIt-Anchor" href="#被动模式测试"></a> 被动模式测试</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># vsftpd服务器 (关闭selinux, firewalld)</span><br>systemctl restart vsftpd<br><br><span class="hljs-comment"># 客户端服务器 (登陆) 进入ftp服务器IP</span><br>nc &#123;ftp_server_ip&#125; 21<br>220 (vsFTPd 2.0.5)                               <span class="hljs-comment"># ftp服务版本</span><br>USER ftp<br>331 Please specify the password.<br>PASS<br>230 Login successful.<br>PASV<br>227 Entering Passive Mode (192,168,0,99,247,209) <span class="hljs-comment"># 服务器在该端口上等着客户端</span><br><br><span class="hljs-comment"># 客户端服务器 (监测) 监控本机IP</span><br><span class="hljs-built_in">echo</span> $((<span class="hljs-number">256</span>*<span class="hljs-number">247</span>+<span class="hljs-number">109</span>))<br>63341<br>nc &#123;client_server_ip&#125; 63441<br><br><span class="hljs-comment"># 客户端服务器 (登陆) </span><br>list<br>150 Here comes the directory listing.<br>226 Directory send OK.<br><br><span class="hljs-comment"># 客户端服务器 (监测)</span><br>drwxr-xr-x 3 0 0 4096 Oct 23 05:53 mysql<br>drwxr-xr-x 2 0 0 4096 Oct 17 12:02 pub<br>-rwxr-xr-x 1 0 0 25088 Sep 28 12:15 实验.doc<br></code></pre></td></tr></table></figure><h5 id="主动模式测试"><a class="markdownIt-Anchor" href="#主动模式测试"></a> 主动模式测试</h5><p>服务器端只开21和20端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># vsftpd服务器 (关闭selinux, firewalld)</span><br>systemctl restart vsftpd<br><br><span class="hljs-comment"># 客户端服务器 (登陆) 进入ftp服务器IP</span><br>nc &#123;ftp_server_ip&#125; 21<br>220 (vsFTPd 2.0.5)                               <span class="hljs-comment"># ftp服务版本</span><br>USER ftp<br>331 Please specify the password.<br>PASS<br>230 Login successful.<br><br><span class="hljs-comment"># 客户端服务器 (监测) 监控本机IP</span><br><span class="hljs-comment"># 这里以10086端口为例子</span><br><span class="hljs-built_in">echo</span> $((<span class="hljs-number">10086</span>/<span class="hljs-number">256</span>))<br>39<br><span class="hljs-built_in">echo</span> $((<span class="hljs-number">10086</span>%<span class="hljs-number">256</span>))<br>102<br><br><span class="hljs-comment"># 客户端服务器 (登陆)</span><br>PORT 192,168,10,100,39,102                          <span class="hljs-comment"># 10086/256，商39，余102 客户端在该端口上等着服务器</span><br>200 PORT <span class="hljs-built_in">command</span> successful. Consider using PASV.<br>list<br>150 Here comes the directory listing.<br>226 Directory send OK.<br><br><span class="hljs-comment"># 客户端服务器 (监测)</span><br>drwxr-xr-x 3 0 0 4096 Oct 23 05:53 mysql<br>drwxr-xr-x 2 0 0 4096 Oct 17 12:02 pub<br>-rwxr-xr-x 1 0 0 25088 Sep 28 12:15 实验.doc<br></code></pre></td></tr></table></figure><h4 id="ftp的命令"><a class="markdownIt-Anchor" href="#ftp的命令"></a> FTP的命令</h4><table><thead><tr><th>命令</th><th>参数</th><th>作用</th><th>注释</th></tr></thead><tbody><tr><td>tcpdump</td><td>-i &lt;interface&gt;</td><td>指定网络接口</td><td>通过指定网络接口来捕获网络数据包</td></tr><tr><td>tcpdump</td><td>-n</td><td>禁用主机名解析</td><td>显示IP地址而不是主机名</td></tr><tr><td>tcpdump</td><td>-c &lt;count&gt;</td><td>捕获指定数量的数据包后停止</td><td>指定捕获的数据包数量</td></tr><tr><td>tcpdump</td><td>-s &lt;snaplen&gt;</td><td>指定数据包的最大捕获长度</td><td>设置数据包的最大捕获长度，以字节为单位</td></tr><tr><td>tcpdump</td><td>-w &lt;file&gt;</td><td>将捕获的数据包写入文件</td><td>将捕获的数据包保存到指定的文件中</td></tr><tr><td>tcpdump</td><td>-r &lt;file&gt;</td><td>从文件中读取数据包</td><td>从指定的文件中读取数据包进行分析</td></tr><tr><td>tcpdump</td><td>-A</td><td>以ASCII格式显示数据包内容</td><td>以ASCII格式显示数据包的内容</td></tr><tr><td>tcpdump</td><td>-X</td><td>以十六进制和ASCII格式显示数据包内容</td><td>以十六进制和ASCII格式显示数据包的内容</td></tr><tr><td>tcpdump</td><td>-vvv</td><td>显示详细的调试信息</td><td>显示更详细的调试信息，包括更多的协议细节</td></tr><tr><td>tcpdump</td><td>-e</td><td>显示以太网头部信息</td><td>显示以太网帧的头部信息</td></tr><tr><td>tcpdump</td><td>-q</td><td>简化输出</td><td>以简化的格式输出结果</td></tr><tr><td>tcpdump</td><td>-S</td><td>以绝对序号显示数据包</td><td>以绝对序号显示数据包的序号</td></tr><tr><td>tcpdump</td><td>-t</td><td>不显示时间戳</td><td>不显示数据包的时间戳</td></tr><tr><td>tcpdump</td><td>-l</td><td>行缓冲输出</td><td>使用行缓冲输出模式</td></tr><tr><td>tcpdump</td><td>-B &lt;buffer_size&gt;</td><td>设置捕获缓冲区大小</td><td>设置捕获数据包的缓冲区大小，以字节为单位</td></tr><tr><td>tcpdump</td><td>-F &lt;file&gt;</td><td>从文件中读取过滤条件</td><td>从指定的文件中读取过滤条件</td></tr><tr><td>tcpdump</td><td>-G &lt;rotate_seconds&gt;</td><td>自动循环文件</td><td>捕获数据包到一个文件一段时间后，自动切换到新文件</td></tr><tr><td>tcpdump</td><td>-W &lt;file_count&gt;</td><td>设置循环文件的数量</td><td>设置循环文件的数量，循环文件的命名格式为&lt;file&gt;.&lt;number&gt;</td></tr><tr><td>tcpdump</td><td>-L</td><td>列出可用的网络接口</td><td>列出系统上可用的网络接口</td></tr><tr><td>tcpdump</td><td>-E &lt;file&gt;</td><td>从文件中读取扩展信息</td><td>从指定的文件中读取扩展信息</td></tr><tr><td>tcpdump</td><td>-v</td><td>显示详细信息</td><td>显示更详细的信息，包括更多的协议细节</td></tr><tr><td>tcpdump</td><td>-V</td><td>显示版本信息</td><td>显示tcpdump的版本信息</td></tr><tr><td>tcpdump</td><td>-h</td><td>显示帮助信息</td><td>显示tcpdump的帮助信息</td></tr></tbody></table><h3 id="http协议"><a class="markdownIt-Anchor" href="#http协议"></a> http协议</h3><h4 id="http协议简介"><a class="markdownIt-Anchor" href="#http协议简介"></a> HTTP协议简介</h4><p>超文本传输协议 (HTTP-Hypertext transfer protocol) 是一种详细规定了浏览器和万维网服务器之间互相通信的规则，通过因特网传送万维网文档的数据传送协议。</p><h4 id="使用浏览器访问web服务器"><a class="markdownIt-Anchor" href="#使用浏览器访问web服务器"></a> 使用浏览器访问web服务器</h4><p>红色部分： 客户端发给服务器<br>蓝色部分： 服务器回给客户端</p><h4 id="使用协议命令访问web服务器"><a class="markdownIt-Anchor" href="#使用协议命令访问web服务器"></a> 使用协议命令访问web服务器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@station99 ~]<span class="hljs-comment"># nc 192.168.0.51 80</span><br>GET / HTTP/1.1                                       <span class="hljs-comment"># 请求站点根目录 【HTTP协议名称及版本可选】</span><br>HOST: 192.168.0.99                                   <span class="hljs-comment"># 发起请求的服务端主机 【可选】</span><br>User-Agent: elinks-1.1                               <span class="hljs-comment"># 发起请求的客户端代理程序 【可选】</span><br>可以忽略其它协商<br>回车<br>回车<br></code></pre></td></tr></table></figure><h4 id="http的持久性连接"><a class="markdownIt-Anchor" href="#http的持久性连接"></a> HTTP的持久性连接</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 打开/etc/http/conf/httpd.conf并添加</span><br>KeepAlive on                <span class="hljs-comment"># 保持连接开启 </span><br>KeepAliveTimeout 15         <span class="hljs-comment"># 保持通话时间 </span><br>MaxKeepAliveRequests 100    <span class="hljs-comment"># 最大维持交易请求</span><br></code></pre></td></tr></table></figure><h4 id="http头部解释扩展"><a class="markdownIt-Anchor" href="#http头部解释扩展"></a> HTTP头部解释（扩展）</h4><ol><li>Accept： 告诉WEB服务器自己接受什么介质类型，<em>/</em> 表示任何类型，type/* 表示该类型下的所有子类型，type/sub-type。</li><li>Accept-Charset： 浏览器申明自己接收的字符集<ul><li>Accept-Encoding： 浏览器申明自己接收的编码方法，通常指定压缩方法，是否支持压缩，支持什么压缩方法（gzip，deflate）</li><li>Accept-Language：浏览器申明自己接收的语言，语言跟字符集的区别：中文是语言，中文有多种字符集，比如big5，gb2312，gbk等等。</li></ul></li><li>Accept-Ranges： WEB服务器表明自己是否接受获取其某个实体的一部分（比如文件的一部分）的请求。bytes：表示接受，none：表示不接受。</li><li>Age： 当代理服务器用自己缓存的实体去响应请求时，用该头部表明该实体从产生到现在经过多长时间了。</li><li>Authorization： 当客户端接收到来自WEB服务器的 WWW-Authenticate 响应时，用该头部来回应自己的身份验证信息给WEB服务器。</li><li>Cache-Control： 请求：no-cache（不要缓存的实体，要求现在从WEB服务器去取）<ul><li>max-age：（只接受 Age 值小于 max-age 值，并且没有过期的对象）</li><li>max-stale：（可以接受过去的对象，但是过期时间必须小于max-stale 值）</li><li>min-fresh：（接受其新鲜生命期大于其当前 Age 跟 min-fresh 值之和的缓存对象）</li><li>响应：public(可以用 Cached 内容回应任何用户)</li><li>private（只能用缓存内容回应先前请求该内容的那个用户）</li><li>no-cache（可以缓存，但是只有在跟WEB服务器验证了其有效后，才能返回给客户端）</li><li>max-age：（本响应包含的对象的过期时间）</li><li>ALL: no-store（不允许缓存）</li></ul></li><li>Connection： 请求：close（告诉WEB服务器或者代理服务器，在完成本次请求的响应后，断开连接，不要等待本次连接的后续请求了）。<br>keepalive（告诉WEB服务器或者代理服务器，在完成本次请求的响应后，保持连接，等待本次连接的后续请求）。<br>响应：close（连接已经关闭）。<br>keepalive（连接保持着，在等待本次连接的后续请求）。<br>Keep-Alive：如果浏览器请求保持连接，则该头部表明希望 WEB 服务器保持连接多长时间（秒）。<br>例如：Keep-Alive：300</li><li>Content-Encoding：WEB服务器表明自己使用了什么压缩方法（gzip，deflate）压缩响应中的对象。例如：Content-Encoding：gzip<ul><li>Content-Language：WEB 服务器告诉浏览器自己响应的对象的语言。</li><li>Content-Length： WEB 服务器告诉浏览器自己响应的对象的长度。例如：Content-Length: 26012</li><li>Content-Range： WEB 服务器表明该响应包含的部分对象为整个对象的哪个部分。例如：Content-Range: bytes 21010-47021/47022</li><li>Content-Type： WEB 服务器告诉浏览器自己响应的对象的类型。例如：Content-Type：application/xml</li></ul></li><li>ETag： 就是一个对象（比如URL）的标志值，就一个对象而言，比如一个 html 文件，如果被修改了，其 Etag 也会被修改， 所以，ETag 的作用跟 Last-Modified 的作用差不多，主要供 WEB 服务器 判断一个对象是否改变了。比如前一次请求某个 html 文件时，获得了其 ETag，当这次又请求这个文件时，浏览器就会把先前获得的 ETag 值发送给 WEB 服务器，然后 WEB 服务器会把这个 ETag 跟该文件的当前ETag 进行对比，然后就知道这个文件有没有改变了。</li><li>Expired： WEB服务器表明该实体将在什么时候过期，对于过期了的对象，只有在跟WEB服务器验证了其有效性后，才能用来响应客户请求。<ul><li>是 HTTP/1.0 的头部。例如：Expires：Sat, 23 May 2009 10:02:12 GMT</li></ul></li><li>Host： 客户端指定自己想访问的WEB服务器的域名/IP 地址和端口号。例如：Host：<a target="_blank" rel="noopener" href="http://rss.sina.com.cn">rss.sina.com.cn</a></li><li>If-Match： 如果对象的 ETag 没有改变，其实也就意味著对象没有改变，才执行请求的动作。<ul><li>If-None-Match： 如果对象的 ETag 改变了，其实也就意味著对象也改变了，才执行请求的动作。</li></ul></li><li>If-Modified-Since：如果请求的对象在该头部指定的时间之后修改了，才执行请求的动作（比如返回对象），否则返回代码304，告诉浏览器该对象没有修改。</li><li>If-Range： 浏览器告诉 WEB 服务器，如果我请求的对象没有改变，就把我缺少的部分给我，如果对象改变了，就把整个对象给我。 浏览器通过发送请求对象的ETag 或者 自己所知道的最后修改时间给 WEB 服务器，让其判断对象是否改变了。总是跟 Range 头部一起使用。</li><li>Last-Modified： WEB 服务器认为对象的最后修改时间，比如文件的最后修改时间，动态页面的最后产生时间等等。</li><li>Location： WEB 服务器告诉浏览器，试图访问的对象已经被移到别的位置了，到该头部指定的位置去取。</li><li>Pramga： 主要使用 Pramga: no-cache，相当于 Cache-Control： no-cache。</li><li>Proxy-Authenticate： 代理服务器响应浏览器，要求其提供代理身份验证信息。Proxy-Authorization： 浏览器响应代理服务器的身份验证请求，提供自己的身份信息。</li><li>Range： 浏览器（比如 Flashget 多线程下载时）告诉 WEB 服务器自己想取对象的哪部分。</li><li>Referer： 浏览器向 WEB 服务器表明自己是从哪个 网页/URL 获得/点击 当前请求中的网址/URL。</li><li>Server: WEB 服务器表明自己是什么软件及版本等信息。例如：Server：Apache/2.0.61 (Unix)</li><li>User-Agent: 浏览器表明自己的身份（是哪种浏览器）。</li><li>Transfer-Encoding: WEB 服务器表明自己对本响应消息体（不是消息体里面的对象） 作了怎样的编码，比如是否分块（chunked）。</li><li>Vary: WEB服务器用该头部的内容告诉 Cache 服务器，在什么条件下才能用本响应所返回的对象响应后续的请求。假如源WEB服务器在接到第一个请求消息时，其响应消息的头部为： Content-Encoding: gzip; Vary: Content-Encoding， 那么 Cache 服务器会分析后续请求消息的头部，检查其 Accept-Encoding，是否跟先前响应的 Vary 头部值一致，即是否使用相同的内容编码方法，这样就可以防止 Cache 服务器用自己Cache 里面压缩后的实体响应给不具备解压能力的浏览器。</li><li>Via： 列出从客户端到 OCS 或者相反方向的响应经过了哪些代理服务器，他们用什么协议（和版本）发送的请求。当客户端请求到达第一个代理服务器时，该服务器会在自己发出的请求里面添加 Via 头部，并填上自己的相关信息，当下一个代理服务器 收到第一个代理服务器的请求时，会在自己发出的请求里面复制前一个代理服务器的请求的Via头部，并把自己的相关信息加到后面， 以此类推，当 OCS 收到最后一个代理服务器的请求时，检查 Via 头部，就知道该请求所经过的路由。</li></ol><h3 id="nc命令补充"><a class="markdownIt-Anchor" href="#nc命令补充"></a> nc命令补充</h3><table><thead><tr><th>命令</th><th>参数</th><th>作用</th><th>注释</th></tr></thead><tbody><tr><td>tcpdump</td><td>-i &lt;interface&gt;</td><td>指定网络接口</td><td>通过指定网络接口来捕获网络数据包</td></tr><tr><td>tcpdump</td><td>-n</td><td>禁用主机名解析</td><td>显示IP地址而不是主机名</td></tr><tr><td>tcpdump</td><td>-c &lt;count&gt;</td><td>捕获指定数量的数据包后停止</td><td>指定捕获的数据包数量</td></tr><tr><td>tcpdump</td><td>-s &lt;snaplen&gt;</td><td>指定数据包的最大捕获长度</td><td>设置数据包的最大捕获长度，以字节为单位</td></tr><tr><td>tcpdump</td><td>-w &lt;file&gt;</td><td>将捕获的数据包写入文件</td><td>将捕获的数据包保存到指定的文件中</td></tr><tr><td>tcpdump</td><td>-r &lt;file&gt;</td><td>从文件中读取数据包</td><td>从指定的文件中读取数据包进行分析</td></tr><tr><td>tcpdump</td><td>-A</td><td>以ASCII格式显示数据包内容</td><td>以ASCII格式显示数据包的内容</td></tr><tr><td>tcpdump</td><td>-X</td><td>以十六进制和ASCII格式显示数据包内容</td><td>以十六进制和ASCII格式显示数据包的内容</td></tr><tr><td>tcpdump</td><td>-vvv</td><td>显示详细的调试信息</td><td>显示更详细的调试信息，包括更多的协议细节</td></tr><tr><td>tcpdump</td><td>-e</td><td>显示以太网头部信息</td><td>显示以太网帧的头部信息</td></tr><tr><td>tcpdump</td><td>-q</td><td>简化输出</td><td>以简化的格式输出结果</td></tr><tr><td>tcpdump</td><td>-S</td><td>以绝对序号显示数据包</td><td>以绝对序号显示数据包的序号</td></tr><tr><td>tcpdump</td><td>-t</td><td>不显示时间戳</td><td>不显示数据包的时间戳</td></tr><tr><td>tcpdump</td><td>-l</td><td>行缓冲输出</td><td>使用行缓冲输出模式</td></tr><tr><td>tcpdump</td><td>-B &lt;buffer_size&gt;</td><td>设置捕获缓冲区大小</td><td>设置捕获数据包的缓冲区大小，以字节为单位</td></tr><tr><td>tcpdump</td><td>-F &lt;file&gt;</td><td>从文件中读取过滤条件</td><td>从指定的文件中读取过滤条件</td></tr><tr><td>tcpdump</td><td>-G &lt;rotate_seconds&gt;</td><td>自动循环文件</td><td>捕获数据包到一个文件一段时间后，自动切换到新文件</td></tr><tr><td>tcpdump</td><td>-W &lt;file_count&gt;</td><td>设置循环文件的数量</td><td>设置循环文件的数量，循环文件的命名格式为&lt;file&gt;.&lt;number&gt;</td></tr><tr><td>tcpdump</td><td>-L</td><td>列出可用的网络接口</td><td>列出系统上可用的网络接口</td></tr><tr><td>tcpdump</td><td>-E &lt;file&gt;</td><td>从文件中读取扩展信息</td><td>从指定的文件中读取扩展信息</td></tr><tr><td>tcpdump</td><td>-v</td><td>显示详细信息</td><td>显示更详细的信息，包括更多的协议细节</td></tr><tr><td>tcpdump</td><td>-V</td><td>显示版本信息</td><td>显示tcpdump的版本信息</td></tr><tr><td>tcpdump</td><td>-h</td><td>显示帮助信息</td><td>显示tcpdump的帮助信息</td></tr></tbody></table><hr><div class="container scrollable-container" id="post-info"><div id="post-info-main"><div class="d-flex flex-row" id="post-author"><span>文章作者:</span><p class="author-names">wooxin</p></div><div class="d-flex flex-row" id="post-links"><span>文章链接:</span><p>https://wooxin.github.io/posts/dbd835eb/</p></div><div class="d-flex flex-row" id="post-copyright"><span>版权声明:</span><p class="copyright-names">本博客所有文章除特别声明外，均采用 CC BY-NC-SA 4.0 许可协议。转载请注明来自本博客</p></div></div></div><hr><div class="container scrollable-container" id="post-comment"><div id="post-comment-main"><script src="https://giscus.app/client.js" data-repo="Wooxin/wooxin.github.io" data-repo-id="R_kgDOMA_DTQ" data-category="Announcements" data-category-id="DIC_kwDOMA_DTc4CveeY" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async></script></div></div><hr><div id="post-bottom"><div class="row" id="post-bottom-content"><div class="col"><div id="post-bottom-prev"><a href="/posts/79bde3d2/">下一篇: Linux网络管理 - ip</a></div></div><div class="col"><div id="post-bottom-next"><a href="/posts/fdc792/">上一篇: Linux网络管理 - iptables</a></div></div></div></div></div></div></article><div class="container-fluid" id="home"><div id="home-head"><h1>欢迎来到 《书集》 博客</h1><hr></div><div class="container scrollable-container" id="home-main"><div id="index-post"><h2 id="这个主题的主旨"><a class="markdownIt-Anchor" href="#这个主题的主旨"></a> 这个主题的主旨</h2><ol><li>我在浏览他人博客的时候频繁使用了滚轮, 那太让人讨厌了, 我想这如何能实现一个高度集成化的博客, 除了寻找文章和浏览文章都不需要滚轮</li><li>提供不那么花里胡哨的体验, 以保证阅读时精神高度集中</li><li>以后会慢慢尝试复刻vim操作方式以彻底摆脱鼠标, 那可能是一个超级大的工程</li></ol><hr><h2 id="为什么创造这个博客"><a class="markdownIt-Anchor" href="#为什么创造这个博客"></a> 为什么创造这个博客?</h2><p>这个博客是我利用闲暇时间制作的, 目的是为了快速且方便的分享/记录自己平时的操作或者一些想法.<br>之前我一直在使用Obsidian来当作笔记软件, 但是因为后面有较为频繁的共享需求, 而自己的Markdown发到别人那里会导致乱码, 甚至有些人都不知道Markdown是什么, 所以我制作了这个博客来存放这些.</p><hr><h2 id="博客主要分享什么内容"><a class="markdownIt-Anchor" href="#博客主要分享什么内容"></a> 博客主要分享什么内容?</h2><p>这个博客由于是我自己做的(本人不太会Nodejs, 职业是IDC运维/网络运维/服务器运维), 所以以后会不断地进行更新.<br>博客目前主要分享的就是一些疑难杂症, 还有某些灵光一闪且实现了的小技巧或者运维小妙招(不包括删库).<br>之前写了很多脚本都是用微信传的, 有一天重装电脑搞丢了脚本备份, 需要的时候发现微信分享过期了, 只能自己重新写.<br>可能也会分享一些Java\C\Rust代码, 但是肯定没有那么频繁, 毕竟本职工作是运维.<br>会分享一些心得以及偶尔玩儿游戏遇到的有趣的事, 有趣的人, 我本身是一个乐子人, 喜欢把自己热爱的或者碰到有趣的事情分享出来, 博大家一乐.</p></div></div></div></div></div></div></div><div id="layout-bottom"><div class="row border rounded-2" id="bottom-main"><div class="col-12"><div id="bottom-main"><div id="bottom-option"><span>博客主题作者</span><span> Wooxin </span><span>使用</span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span>.</span><a href="/">首页</a></div></div></div></div></div><div id="shift-menu"><div id="shift-menu-main"><div id="shiftWindow"><span class="shift-menu-title user-select-none">快捷键菜单</span><br><div id="shift-icon"><i class="shift-menu-home bi bi-box-seam-fill user-select-none"><span class="user-select-none">&nbsp; Shift &nbsp; 显示此窗口</span></i><i class="shift-menu-home bi bi-house-fill user-select-none"> <span class="user-select-none">Shift + H 跳转到首页</span></i><i class="shift-menu-home bi bi-archive-fill user-select-none"> <span class="user-select-none">Shift + 1 跳转到归档</span></i><i class="shift-menu-home bi bi-list user-select-none"> <span class="user-select-none">Shift + 2 跳转到分类</span></i><i class="shift-menu-home bi bi-tags user-select-none"> <span class="user-select-none">Shift + 3 跳转到标签</span></i><i class="shift-menu-home bi bi-info-circle user-select-none"> <span class="user-select-none">Shift + 4 跳转到日志</span></i><i class="shift-menu-home bi bi-info-circle user-select-none"> <span class="user-select-none">Shift + R 刷新当前页</span></i></div></div></div></div><div id="right-menu"><div class="right-menu-list"><a class="right-menu-item" href="javascript:window.history.back();"><i class="bi bi-arrow-left-circle-fill"></i></a><a class="right-menu-item" href="javascript:window.location.reload();"><i class="bi bi-arrow-down-right-circle-fill"></i></a><a class="right-menu-item" href="javascript:window.history.forward();"><i class="bi bi-arrow-right-circle-fill"></i></a><a class="right-menu-item" href="javascript:window.location.href = window.location.origin;"><i class="bi bi-house-fill"></i></a></div><div class="right-menu-list"><a class="right-menu-item row m-0 p-0" href="javascript:randomPage();"><div class="col-3 m-0 p-0"><i class="bi bi-shuffle"></i></div><div class="col m-0 p-0"><span>随机访问</span></div></a></div><div class="right-menu-list hide" id="menu-text"><a class="right-menu-item" href="javascript:rmf.copySelect();"><i class="bi bi-clipboard-fill"></i><span>复制内容</span></a></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script><script src="/js/woxhome.js"></script><script src="/js/main/effect/fps.js"></script><script src="/js/main/effect/shift-menu.js"></script><script src="/js/main/effect/right-menu.js"></script><script src="/js/main/effect/word-count.js"></script><script src="/js/main/effect/post-highlight.js"></script><script src="/js/main/search/search.js"></script><script src="/js/main/search/search-bottom.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.js"></script><script src="/js/main/pjax/pjax_reload.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script><script src="/js/main/reading/reading-progress.js"></script><script src="/js/main/reading/reading-loding.js"></script><script src="/js/main/reading/reading-title.js"></script><script src="/js/main/toc/toc.js"></script><script src="/js/main/giscus/giscus-reload.js"></script></body></html>